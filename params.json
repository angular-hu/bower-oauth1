{"name":"angular-hu-oauth1","tagline":"Sign $http requests with OAuth1 - httpu.oauth1","body":"\r\n## httpu.oauth1\r\n\r\nFactory that creates an [interceptor](https://docs.angularjs.org/api/ng/service/$http) to sign oauth1 requests. Once you have arrived here, you must know that _storing secrets in the client_, even for signing requests, is **not** safe. The secret you will use in this module can be seen by anybody. \r\n\r\n### Installation\r\n\r\nGet it from [bower](http://bower.io/) or directly download it.\r\n\r\n```sh\r\nbower install --save angular-hu-oauth1\r\n```\r\n\r\nAdd the oauth1 and the signature generation dependency in the HTML\r\n\r\n```html\r\n<script type=\"text/javascript\" src=\"bower_components/oauth-signature-js/dist/oauth-signature.js\"></script>\r\n<script type=\"text/javascript\" src=\"bower_components/angular-hu-oauth1/oauth1.js\"></script>\r\n```\r\n\r\nAdd the `httpu.oauth1` dependency to your App Module\r\n\r\n```js\r\nangular.module('MyApp', ['httpu.oauth1']);\r\n```\r\n\r\nThe `huOAuth1InterceptorFactory` dependency is now available\r\n\r\n### Usage\r\n\r\n```js\r\nangular.module('MyApp')\r\n.config(function($httpProvider) {\r\n  $httpProvider.interceptors.push('oauthInterceptor');\r\n})\r\n//Create your specific backend oauth implementation to be added to your request interceptors\r\n.factory('oauthInterceptor', function(huOAuth1InterceptorFactory) {\r\n  //all parameters are optional.\r\n  //Refer to source code for default implementations and more instantiation options are below\r\n  return huOAuth1InterceptorFactory({\r\n    getTimestamp: myTimestampGetter //oauth must be signed with your server time. \r\n  });\r\n})\r\n.run(function($http) {\r\n  $http.get('http://myapi.com/things', {\r\n    params: {\r\n      id: 5\r\n    },\r\n    oauth1: {\r\n      consumerKey: 'myConsumerKey',\r\n      consumerSecret: 'myConsumerSecret'\r\n    }\r\n  });\r\n  //GET http://myapi.com/things?id=5&oauth_consumer_key=myConsumerKey&oauth_nonce=W5x7uncL3ni&oauth_timestamp=123434334&oauth_signature=9frD%2Bwl4j6zsXtztwWHIRqFKmu8%3D&oauth_signature_method=HMAC-SHA1&oauth_version=1.0\r\n});\r\n```\r\n\r\n### Options\r\nOptions to pass to `huOAuth1InterceptorFactory` at instantiation time \r\n\r\n#### getTimestamp\r\nFunction to retrieve the server timestamp. Must return `Number` or a promise resolving to a `Number` that represents the current server time in *seconds* \r\n\r\n```js\r\nfunction myTimestampGetter() {\r\n  return $http.get('http://myserver.com/time')\r\n    .then(function(response) {\r\n      return response.data;\r\n    });\r\n}\r\nreturn huOAuth1InterceptorFactory({\r\n    getTimestamp: myTimestampGetter //oauth must be signed with your server time. \r\n  });\r\n```\r\n\r\n#### serializer\r\nFunction to convert the request `params` property to a set of `{key, value}` strings. This set *must* be the same that angular is using to generate your URL, so refer to `httpu.serializer` module to make a DRY implementation.\r\n\r\n```js\r\nfunction mySerializer(params, addKeyValue) {\r\n  //`params` is the request params property: {id: 5} in the above example\r\n  //`addKeyValue` is the {Function} to call with every {key, value} set \r\n  angular.forEach(params, function(value, key) {\r\n    if (angular.isDate(value)) {\r\n      //our Backend understand dates as ISOStrings\r\n      addKeyValue(key, value.toISOString());    \r\n    } else {\r\n      addKeyValue(key, String(value));\r\n    }\r\n  });\r\n}\r\n    \r\nreturn huOAuth1InterceptorFactory({\r\n    serializer: mySerializer //oauth must be signed with your server time. \r\n  });\r\n```\r\n\r\n#### createError\r\nFunction to create errors that may happen inside the interceptor. Use this method when you have some kind of error recovery executing in your interceptors chain. Creating errors on interceptors is dangerous, cause another interceptor with requestError/responseError can have other error management strategies.\r\nThis interceptor creates an error when you don't specify a `consumerKey` or `consumerSecret` in the request `oauth1` property. It also catches the possible errors in your `getTimestamp` and signature generation implementation.\r\n\r\nThe current request will be rejected with the object this function returns\r\n\r\n```js\r\nfunction myCreateError(config, error) {\r\n  //`config` is the request config property\r\n  //`error` is the original error that caused this interceptor to fail\r\n  config.error = err;\r\n  return config;\r\n}\r\n    \r\nreturn huOAuth1InterceptorFactory({\r\n    createError: myCreateError  \r\n  });\r\n```\r\n\r\n\r\n### Use cases\r\n\r\n* You have one or severals backends that need oauth1 signed request, with different configurations. \r\n\r\n## LICENSE\r\n\r\nThe MIT License ([MIT](LICENSE))\r\n\r\nCopyright (c) 2015 Telef√≥nica I+D - http://www.tid.es\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}